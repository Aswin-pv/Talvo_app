
{% load static %} {% load custom_filters %} {% block link %}
<link rel="stylesheet" href="{% static 'css/user/bookings.css' %}" />
{% endblock %} {% block content %} {% include 'component/topheader.html' %} {% include 'component/header.html' %}

<section class="bookings gradient-custom mt-4 mb-5">
    <div class="container py-4">
      <div class="row mb-5">
        <div class="col-12">
          <div class="d-flex justify-content-end gap-2">
            <a href="{% url 'home:all_bookings' %}">
                <button type="button" class="btn btn-outline-dark btn-sm {% if current_view == 'home:all_bookings' %}active{% endif %}" data-mdb-ripple-init data-mdb-ripple-color="dark">All</button>
            </a>
            <a href="{% url 'home:pending_bookings' %}">
                <button type="button" class="btn btn-outline-dark btn-sm {% if current_view == 'home:pending_bookings' %}active{% endif %}" data-mdb-ripple-init data-mdb-ripple-color="dark">Pending</button>
            </a>
            <a href="{% url 'home:completed_bookings' %}">
                <button type="button" class="btn btn-outline-dark btn-sm {% if current_view == 'home:completed_bookings' %}active{% endif %}" data-mdb-ripple-init data-mdb-ripple-color="dark">Completed</button>
            </a>
            <a href="{% url 'home:cancelled_bookings' %}">
                <button type="button" class="btn btn-outline-dark btn-sm {% if current_view == 'home:cancelled_bookings' %}active{% endif %}" data-mdb-ripple-init data-mdb-ripple-color="dark">Cancelled</button>
            </a>
        </div>
        </div>
      </div>
      <div class="row d-flex justify-content-center align-items-center">
        
        <div class="col-lg-10 col-xl-10">
          {% if bookings %}
            <div class="card p-4">
                <!-- card body-->
                <div class="card-body p-4">
                  <div class="mb-5">
                    <h4 class="mb-2">Your Bookings</h4>
                    <p>Check the status of recent bookings, booking cancellation, and discover more.</p>
                  </div>
                  {% for item in bookings %}
                  <div class="mb-5">
                    <!-- text -->
                    <div class="border-bottom mb-3 pb-3 d-lg-flex align-items-center justify-content-between booking-code">
                      <div class="d-flex flex-column flex-lg-row align-items-start justify-content-between">
                          <h6 class="mb-0">Booking <b>{{ item.order_id }}</b></h6>
                          <span class="ms-lg-2">Our team Reached on {{ item.booking_date }}</span>
                          {% if item.booking_status == 'Pending' %}
                          <span class="badge bg-warning rounded-pill ms-lg-2 mt-lg-0 mt-2">{{ item.booking_status }}</span>
                          {% elif item.booking_status == 'Completed' %}
                          <span class="badge bg-success rounded-pill ms-lg-2 mt-lg-0 mt-2">{{ item.booking_status }}</span>
                          {% else %}
                          <span class="badge bg-danger rounded-pill ms-lg-2 mt-lg-0 mt-2">{{ item.booking_status }}</span>
                          {% endif %}
                      </div>
                      <div class="d-flex align-items-center justify-content-between mt-lg-0 mt-2">
                          <a class="text-dark text-decoration-none fw-bold manage-order" href="{% url 'home:booking_details' item.order_id  %}">Manage orders</a>
                      </div>
                  </div>
                    {% for subcategory in item.booking.all %}
                    <!-- row -->
                    <div class="row justify-content-between align-items-center">
                      <!-- col -->
                      <div class="col-lg-8 col-12">
                        <div class="d-md-flex">
                          <div class="col-md-2 d-flex align-items-center">
                            <!-- img -->
                              <img src="{{ subcategory.subcategory.sub_category_image.url }}" alt="" class="img-4by3-xl rounded img-fluid">
                          </div>
                          <div class="ms-md-4 mt-2 mt-lg-0">
                            <!-- heading -->
                            <h5 class="mb-1">
                              {{ subcategory.subcategory }}
                            </h5>
                            <!-- text -->
                          <span class="text-dark">{{ subcategory.subcategory.category }}</span>, Qty:<span class="text-dark"> {{ subcategory.quantity }}</span>
                            
                            <!-- text -->
                            <div class="mt-3">
                              <h4>â‚¹{{ subcategory.price|quantity_filter:subcategory.quantity }}</h4>
                            </div>
                          </div>
                        </div>
                      </div>
                      <!-- button -->
                      <div class="col-lg-3 col-12 d-grid">
                        <a href="" class="btn btn-dark">Book again</a>
                      </div>
                    </div>
                    <hr class="my-3">
                    {% endfor %}
                  </div>
              
                  {% endfor %}
                
                </div>
              </div>    
              {% else %}
              <div class="d-flex justify-content-center align-items-center">
                <div class="text-center">
                  <img class="img-fluid" src="{% static 'images/home/empty_bookings.jpeg' %}" alt="" height="300px" width="300px">
                  <h2 class="section-heading text-uppercase">No bookings Found</h2>
                      <p class="text-muted">Currently there is no booking</p>
                      <a href="{% url 'home:category:category' %}" class="btn btn-dark">book now  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-right" viewBox="0 0 16 16">
                        <path fill-rule="evenodd" d="M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8"/>
                      </svg></a>
                </div>
              </div>
             
            {% endif %}
        </div>
       
      </div>
    </div>
  </section>


  {% include 'component/footer.html' %}
 {% endblock %}

{% block scripts %}

<!-- <script>
  // Code
  $(document).on('click', '#pending-btn',function(e){
  e.preventDefault();
  $.ajax({
      type:'GET',
      url: "{% url 'home:all_bookings' %}",

      success:function(json){
         

      },
      error:function(xhr, errmsg, err){
          console.error('Error:', xhr.responseText);
      }
  });
})
</script> -->


{% endblock %}
