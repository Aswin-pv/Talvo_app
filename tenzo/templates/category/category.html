{% extends 'base.html' %}
{% load static %}

{% block link %}
<link rel="stylesheet" href="{% static 'css/category/category.css' %}">
<link rel="stylesheet" href="//code.jquery.com/ui/1.13.2/themes/base/jquery-ui.css">
{% endblock %}

{% block content %}
{% include 'component/topheader.html' %}
{% include 'component/header.html' %}
<nav class="search-bar py-5">
  <div class="containter">
    <div class="row">
      <div class="col-lg-12">
        <form action="{% url 'home:category:search_category' %}" method="post">
          {% csrf_token %}
          <div class="input-group d-flex justify-content-end pe-5" >
            <input type="search" id="serach-category" name="category-search" placeholder="Search" class="rounded-2" aria-label="Search" required />
            <button type="submit" class="btn btn-outline-primary" data-mdb-ripple-init>search</button>
          </div>
        </form>

      </div>
    </div>
  </div>

</nav>

<section class="category">
    <div class="container">
        <h1 class="py-4">All Categories</h1>
        <div class="row">
          {% for category in categoryfinal %}
            <div class="col-lg-3">
              <a href="{% url 'home:category:sub_category' slug=category.slug %}">
                <div class="card bg-light">
                    <img src="{{ category.category_image.url }}" class="card-img-top " height="200px" alt="...">
                    <div class="card-body">
                      <h1>{{ category.id }}</h1>
                      <h5 class="card-title">{{ category.title }}</h5>
                      <p class="card-text">{{ category.description }}</p>
                    </div>
                  </div>
                </a>
                </div>
                {% endfor %}
                <nav aria-label="...">
                  <ul class="pagination">
                    {% if categoryfinal.has_previous %}
                    <li class="page-item">
                      <a class="page-link" href="/category/?page=1">First</a>
                    </li>
                    <li class="page-item">
                      <a class="page-link" href="?page={{ categoryfinal.previous_page_number }}">Previous</a>
                    </li>
                    {% endif %}
                    {% for page in totalpagelist %}
                    <li class="page-item">
                      <a class="page-link" href="/category/?page={{ page }}">{{ page }}</a>
                    </li>
                    {% endfor %}
                    {% if categoryfinal.has_next %}
                    <li class="page-item">
                      <a class="page-link" href="?page={{ categoryfinal.next_page_number }}">Next</a>
                    </li>
                    <li class="page-item">
                      <a class="page-link" href="?page={{ last_page }}">Last</a>
                    </li>
                    
                    {% endif %}
                  </ul>
                </nav>

    </div>
    </div>
</section>

{% endblock %}
{% block scripts %}

<script src="https://code.jquery.com/ui/1.13.2/jquery-ui.js"></script>

<script>
  var availableTags = [];

  $.ajax({
    type: 'GET',
    url: "{% url 'home:category:search_list' %}",
    data: {

        action: 'get',
    },
    success: function(json) {
       
        startAutocomplete(json);
    },
    error: function(xhr, errmsg, err) {
        console.error('Error:', xhr.responseText);
    }
});


    function startAutocomplete(availableTags){
      $( "#serach-category" ).autocomplete({
      source: availableTags
    });
    }
    
</script>

{% endblock %}



